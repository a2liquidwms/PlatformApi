@{
    ViewData["Title"] = "Email Confirmation";
    Layout = "_AuthLayout";
    bool isConfirmed = ViewBag.IsConfirmed ?? false;
}

<h2 class="page-title">Email Confirmation</h2>

@if (isConfirmed)
{
    <div class="confirmation-success">
        <div class="success-icon">✓</div>
        <h3>Email Confirmed Successfully!</h3>
        <p>Your email address has been confirmed. You can now sign in to your account and start using all features.</p>
        
        <div class="action-buttons">
            <a asp-action="Login" asp-route-returnUrl="@ViewBag.ReturnUrl" class="btn btn-primary">Sign In Now</a>
        </div>
    </div>
}
else
{
    <div class="confirmation-error">
        <div class="error-icon">✕</div>
        <h3>Email Confirmation Failed</h3>
        <p>The confirmation link is invalid or has expired. You can request a new confirmation email below.</p>
        
        <form method="post" asp-action="ResendConfirmation" class="resend-form">
            <div asp-validation-summary="ModelOnly" class="validation-summary-errors"></div>
            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" name="email" id="email" class="form-control" placeholder="Enter your email address" required />
            </div>
            <input type="hidden" name="returnUrl" value="@ViewBag.ReturnUrl" />
            <button type="submit" class="btn btn-primary">Resend Confirmation Email</button>
        </form>
        
        <div class="auth-links">
            <a asp-action="Login" asp-route-returnUrl="@ViewBag.ReturnUrl" class="auth-link">← Back to Sign In</a>
            <span>|</span>
            <a asp-action="Register" asp-route-returnUrl="@ViewBag.ReturnUrl" class="auth-link">Create new account</a>
        </div>
    </div>
}

<style>
    .confirmation-success, .confirmation-error {
        text-align: center;
        padding: var(--spacing-lg) 0;
    }

    .success-icon, .error-icon {
        font-size: 4rem;
        font-weight: bold;
        margin-bottom: var(--spacing-md);
        display: block;
    }

    .success-icon {
        color: var(--success);
    }

    .error-icon {
        color: var(--error);
    }

    .confirmation-success h3, .confirmation-error h3 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: var(--spacing-sm);
        color: var(--text-primary);
    }

    .confirmation-success p, .confirmation-error p {
        font-size: 1rem;
        color: var(--text-secondary);
        margin-bottom: var(--spacing-lg);
        line-height: 1.6;
    }

    .action-buttons {
        margin: var(--spacing-lg) 0;
    }

    .resend-form {
        max-width: 300px;
        margin: var(--spacing-lg) auto;
        text-align: left;
    }

    .resend-form .form-group {
        margin-bottom: var(--spacing-md);
    }

    .resend-form label {
        font-weight: 500;
        margin-bottom: var(--spacing-xs);
        display: block;
        text-align: center;
    }

    .resend-form .btn {
        width: 100%;
    }

    .auth-links {
        margin-top: var(--spacing-lg);
        text-align: center;
    }
</style>